<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FreeCAD C++: App::Extension Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="width.css" rel="stylesheet" type="text/css"/>
<link href="details.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FreeCAD C++
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>App</b></li><li class="navelem"><a class="el" href="classApp_1_1Extension.html">Extension</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="classApp_1_1Extension-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">App::Extension Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;App/Extension.h&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Base class for all extension that can be added to a <a class="el" href="classApp_1_1DocumentObject.html">DocumentObject</a>. </p>
<p>For general documentation on why extension system exists and how to use it see the <a class="el" href="classApp_1_1ExtensionContainer.html" title="Container which can hold extensions.">ExtensionContainer</a> documentation. Following is a description howto create custom extensions.</p>
<p>Extensions are like every other FreeCAD object and based on properties. All information storage and persistence should be achieved by use of those. Additional any number of methods can be added to provide functionality around the properties. There are 3 small difference to normal objects:</p><ol type="1">
<li>They must be derived from <a class="el" href="classApp_1_1Extension.html" title="Base class for all extension that can be added to a DocumentObject.">Extension</a> class</li>
<li>Properties must be handled with special extension macros</li>
<li>Extensions must be initialised This works as simple as <div class="fragment"><div class="line"><span class="keyword">class </span>MyExtension : <span class="keyword">public</span> Extension {</div><div class="line">  EXTENSION_PROPERTY_HEADER(MyExtension);</div><div class="line">  PropertyInt MyProp;</div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> overridableMethod(DocumentObject* obj) {};</div><div class="line">};</div><div class="line"></div><div class="line">EXTENSION_PROPERTY_SOURCE(App::MyExtension, <a class="code" href="classApp_1_1Extension.html">App::Extension</a>)</div><div class="line">MyExtension::MyExtension() {</div><div class="line"></div><div class="line">    EXTENSION_ADD_PROPERTY(MyProp, (0)) * </div><div class="line">    initExtension(MyExtension::getExtensionClassTypeId());</div><div class="line">}</div><div class="line"><span class="keyword">typedef</span> ExtensionPythonT&lt;MyExtension&gt; MyExtensionPython;</div></div><!-- fragment --></li>
</ol>
<p>The special python extension type created above is important, as only those python extensions can be added to an object from python. It does not work to add the c++ version directly there.</p>
<p>Note that every method of the extension becomes part of the extended object when added from c++. This means one should carefully design the API and make only necessary methods public or protected. Every internal method should be private.</p>
<p>The automatic availability of methods in the class does not hold for the python interface, only for c++ classes. This is like every where else in FreeCAD, there is no automatic creation of python API from c++ classes. Hence the extension creator must also create a custom python object of its extension, which works exactly like the normal FreeCAD python object workflow. There is nothing special at all for extension python objects, the normal xml + imp.cpp approach is used. It must only be taken care that the objects father is the correct extension base class. Of course also make sure your extension returns the correct python object in its "getPyObject" call. Every method you create in the extensions python will be later added to an extended object. This happens automatically for both, c++ and python extension, if "getPyObject" returns the correct python object. No extra work needs to be done.</p>
<p>A special case that needs to be handled for extensions is the possibility of overridden methods. Often it is desired to customise extension behaviour by allowing the user to override methods provided by the extension. On c++ side this is trivial, such methods are simply marked as "virtual" and can than be overridden in any derived class. This is more involved for the python interface and here special care needs to be taken.</p>
<p>As already seen above one needs to create a special ExtensionPythonT&lt;&gt; object for extension from python. This is done exactly for the purpose of allowing to have overridable methods. The <a class="el" href="classApp_1_1ExtensionPythonT.html">ExtensionPythonT</a> wrapper adds a proxy property which holds a PyObject which itself will contain the implementations for the overridden methods. This design is equal to the ObjectPythonT&lt;&gt; design of normal document objects. As this wrapper inherits the c++ extension class it can also override the virtual functions the user designed to be overridden. What it should do at a call of the virtual method is to check if this method is implemented in the proxy object and if so call it, and if not call the normal c++ version. It is the extensions creators responsibility to implement this check and call behaviour for every overridable method. This is done by creating a custom wrapper just like ExtensionPythonT&lt;&gt; and overriding all virtual methods. </p><div class="fragment"><div class="line"><span class="keyword">template</span>&lt;<span class="keyword">typename</span> ExtensionT&gt; <span class="keyword">class </span>MyExtensionPythonT : <span class="keyword">public</span> ExtensionT {</div><div class="line"><span class="keyword">public</span>:</div><div class="line">  </div><div class="line">  MyExtensionPythonT() {}</div><div class="line">  <span class="keyword">virtual</span> ~MyExtensionPythonT() {}</div><div class="line"></div><div class="line">  <span class="keyword">virtual</span> <span class="keywordtype">bool</span> overridableMethod(DocumentObject* obj)<span class="keyword">  override </span>{</div><div class="line">      Py::Object pyobj = Py::asObject(obj-&gt;getPyObject());</div><div class="line">      EXTENSION_PROXY_ONEARG(allowObject, pyobj);</div><div class="line">              </div><div class="line">      <span class="keywordflow">if</span>(result.isNone())</div><div class="line">          ExtensionT::allowObject(obj);</div><div class="line">      </div><div class="line">      <span class="keywordflow">if</span>(result.isBoolean())</div><div class="line">          <span class="keywordflow">return</span> result.isTrue();</div><div class="line">      </div><div class="line">      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line">  };</div><div class="line">};</div></div><!-- fragment --><p> @Note As seen in the code there are multiple helper macros to ease the repetitive work of querying and calling methods of the proxy object. See the macro documentation for how to use them.</p>
<p>To ensure that your wrapper is used when a extension is created from python the extension type must be exposed as follows: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> ExtensionPythonT&lt;MyExtensionPythonT&lt;MyExtension&gt;&gt; MyExtensionPython;</div></div><!-- fragment --><p>This boilerplate is absolutely necessary to allow overridable methods in python and it is the extension creator's responsibility to ensure full implementation. </p>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td colspan="2"><div class="groupHeader">Access properties</div></td></tr>
<tr class="memitem:afa423a5499e433085ae47e19697bd282"><td class="memItemLeft" align="right" valign="top"><a id="afa423a5499e433085ae47e19697bd282"></a>
virtual <a class="el" href="classApp_1_1Property.html">Property</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#afa423a5499e433085ae47e19697bd282">extensionGetPropertyByName</a> (const char *name) const</td></tr>
<tr class="memdesc:afa423a5499e433085ae47e19697bd282"><td class="mdescLeft">&#160;</td><td class="mdescRight">find a property by its name <br /></td></tr>
<tr class="separator:afa423a5499e433085ae47e19697bd282"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af755be43f3a15575fa1481f30309936c"><td class="memItemLeft" align="right" valign="top"><a id="af755be43f3a15575fa1481f30309936c"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#af755be43f3a15575fa1481f30309936c">extensionGetPropertyName</a> (const <a class="el" href="classApp_1_1Property.html">Property</a> *prop) const</td></tr>
<tr class="memdesc:af755be43f3a15575fa1481f30309936c"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the name of a property <br /></td></tr>
<tr class="separator:af755be43f3a15575fa1481f30309936c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b2aed9411fee6b3864c56b93de4d702"><td class="memItemLeft" align="right" valign="top"><a id="a0b2aed9411fee6b3864c56b93de4d702"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a0b2aed9411fee6b3864c56b93de4d702">extensionGetPropertyMap</a> (std::map&lt; std::string, <a class="el" href="classApp_1_1Property.html">Property</a> * &gt; &amp;Map) const</td></tr>
<tr class="memdesc:a0b2aed9411fee6b3864c56b93de4d702"><td class="mdescLeft">&#160;</td><td class="mdescRight">get all properties of the class (including properties of the parent) <br /></td></tr>
<tr class="separator:a0b2aed9411fee6b3864c56b93de4d702"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41b233825287bac392b2b94d0f98bbc8"><td class="memItemLeft" align="right" valign="top"><a id="a41b233825287bac392b2b94d0f98bbc8"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a41b233825287bac392b2b94d0f98bbc8">extensionGetPropertyList</a> (std::vector&lt; <a class="el" href="classApp_1_1Property.html">Property</a> * &gt; &amp;List) const</td></tr>
<tr class="memdesc:a41b233825287bac392b2b94d0f98bbc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">get all properties of the class (including properties of the parent) <br /></td></tr>
<tr class="separator:a41b233825287bac392b2b94d0f98bbc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3ce6aa1876001fe8517bd9de4c2c165"><td class="memItemLeft" align="right" valign="top"><a id="af3ce6aa1876001fe8517bd9de4c2c165"></a>
virtual short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#af3ce6aa1876001fe8517bd9de4c2c165">extensionGetPropertyType</a> (const <a class="el" href="classApp_1_1Property.html">Property</a> *prop) const</td></tr>
<tr class="memdesc:af3ce6aa1876001fe8517bd9de4c2c165"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Type of a <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:af3ce6aa1876001fe8517bd9de4c2c165"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5313ce19e923a8d13eb412d4ca7da86c"><td class="memItemLeft" align="right" valign="top"><a id="a5313ce19e923a8d13eb412d4ca7da86c"></a>
virtual short&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a5313ce19e923a8d13eb412d4ca7da86c">extensionGetPropertyType</a> (const char *name) const</td></tr>
<tr class="memdesc:a5313ce19e923a8d13eb412d4ca7da86c"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Type of a named <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:a5313ce19e923a8d13eb412d4ca7da86c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5b6bc437fa45bdf296d7c221baaf50c3"><td class="memItemLeft" align="right" valign="top"><a id="a5b6bc437fa45bdf296d7c221baaf50c3"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a5b6bc437fa45bdf296d7c221baaf50c3">extensionGetPropertyGroup</a> (const <a class="el" href="classApp_1_1Property.html">Property</a> *prop) const</td></tr>
<tr class="memdesc:a5b6bc437fa45bdf296d7c221baaf50c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Group of a <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:a5b6bc437fa45bdf296d7c221baaf50c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f487a44129b227b74c95901c20ec7ae"><td class="memItemLeft" align="right" valign="top"><a id="a4f487a44129b227b74c95901c20ec7ae"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a4f487a44129b227b74c95901c20ec7ae">extensionGetPropertyGroup</a> (const char *name) const</td></tr>
<tr class="memdesc:a4f487a44129b227b74c95901c20ec7ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Group of a named <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:a4f487a44129b227b74c95901c20ec7ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a414e6373f8333735c3b59621618d038e"><td class="memItemLeft" align="right" valign="top"><a id="a414e6373f8333735c3b59621618d038e"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a414e6373f8333735c3b59621618d038e">extensionGetPropertyDocumentation</a> (const <a class="el" href="classApp_1_1Property.html">Property</a> *prop) const</td></tr>
<tr class="memdesc:a414e6373f8333735c3b59621618d038e"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Group of a <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:a414e6373f8333735c3b59621618d038e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a442b37343be3b7c9a6b206e5650f2ec2"><td class="memItemLeft" align="right" valign="top"><a id="a442b37343be3b7c9a6b206e5650f2ec2"></a>
virtual const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classApp_1_1Extension.html#a442b37343be3b7c9a6b206e5650f2ec2">extensionGetPropertyDocumentation</a> (const char *name) const</td></tr>
<tr class="memdesc:a442b37343be3b7c9a6b206e5650f2ec2"><td class="mdescLeft">&#160;</td><td class="mdescRight">get the Group of a named <a class="el" href="classApp_1_1Property.html">Property</a> <br /></td></tr>
<tr class="separator:a442b37343be3b7c9a6b206e5650f2ec2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr><td colspan="2"><div class="groupHeader">Persistence</div></td></tr>
<tr class="memitem:a94c65f4a8cf93d9a149726049885aafd"><td class="memItemLeft" align="right" valign="top"><a id="a94c65f4a8cf93d9a149726049885aafd"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>extensionSave</b> (<a class="el" href="classBase_1_1Writer.html">Base::Writer</a> &amp;) const</td></tr>
<tr class="separator:a94c65f4a8cf93d9a149726049885aafd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1a7fb60166532ef2838ee0722c5955f"><td class="memItemLeft" align="right" valign="top"><a id="ab1a7fb60166532ef2838ee0722c5955f"></a>
virtual void&#160;</td><td class="memItemRight" valign="bottom"><b>extensionRestore</b> (<a class="el" href="classBase_1_1XMLReader.html">Base::XMLReader</a> &amp;)</td></tr>
<tr class="separator:ab1a7fb60166532ef2838ee0722c5955f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
TypeHandling</h2></td></tr>
<tr class="memitem:ad635be48204f8f5fb9c75103cd89fb20"><td class="memItemLeft" align="right" valign="top"><a id="ad635be48204f8f5fb9c75103cd89fb20"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>extensionIsDerivedFrom</b> (const <a class="el" href="classBase_1_1Type.html">Base::Type</a> type) const</td></tr>
<tr class="separator:ad635be48204f8f5fb9c75103cd89fb20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae3da586681edaf0ce9fee0bc79a330f2"><td class="memItemLeft" align="right" valign="top"><a id="ae3da586681edaf0ce9fee0bc79a330f2"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>initExtensionSubclass</b> (<a class="el" href="classBase_1_1Type.html">Base::Type</a> &amp;toInit, const char *ClassName, const char *ParentName, Base::Type::instantiationMethod method=0)</td></tr>
<tr class="separator:ae3da586681edaf0ce9fee0bc79a330f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 24 2019 13:49:38 for FreeCAD C++ by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
